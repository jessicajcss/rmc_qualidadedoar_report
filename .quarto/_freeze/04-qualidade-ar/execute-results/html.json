{
  "hash": "6c44abaff252708b0cf1dcaf85183196",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Padrões Temporais da Qualidade do Ar\"\n---\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate)\nlibrary(ggh4x)\nlibrary(reshape2)\n```\n:::\n\n\n### Padrão hora × dia da semana (GM-5000 horário)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nif (exists(\"air_quality_data_ugm3\")) {\n  gm_hour <- air_quality_data_ugm3 %>%\n    mutate(hr = hour(date),\n           wday = wday(date, label = TRUE)) %>%\n    pivot_longer(-c(Cidade,date,hr,wday), names_to=\"Poluente\", values_to=\"Valor\") %>%\n    group_by(Cidade, Poluente, wday, hr) %>%\n    summarise(Media = mean(Valor, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(gm_hour, aes(hr, Media, colour=wday)) +\n    geom_line(linewidth=0.4) +\n    facet_nested(Poluente ~ Cidade, scales=\"free_y\") +\n    scale_x_continuous(breaks=seq(0,24,4)) +\n    theme_classic() +\n    labs(x=\"Hora\", y=\"Média horária\", colour=\"Dia\", title=\"Padrões hora × dia da semana (GM-5000)\")\n}\n```\n:::\n\n\n### Padrão hora × dia da semana (PurpleAir)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nif (exists(\"purpleair\")) {\n  pa_hour <- purpleair %>%\n    mutate(hr = hour(Date),\n           wday = wday(Date, label = TRUE)) %>%\n    group_by(Cidade, sensor_id, wday, hr) %>%\n    summarise(PM25 = mean(PM2.5, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(pa_hour, aes(hr, PM25, colour=wday)) +\n    geom_line(linewidth=0.4) +\n    facet_nested(. ~ Cidade + sensor_id, scales=\"free_y\") +\n    scale_x_continuous(breaks=seq(0,24,4)) +\n    theme_classic() +\n    labs(x=\"Hora\", y=\"PM2.5 (µg/m³)\", colour=\"Dia\", title=\"Padrões hora × dia da semana (PurpleAir)\")\n}\n```\n:::\n\n\n### Comparação com Limites OMS (diário GM-5000)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nif (exists(\"Datafinal\")) {\n  df_day <- Datafinal %>%\n    select(Cidade, Date, SO2, NO2, PM2.5, PM10, O3, CO) %>%\n    pivot_longer(-c(Cidade, Date), names_to=\"Poluente\", values_to=\"Valor\")\n\n  df_mean <- df_day %>%\n    group_by(Cidade, Poluente) %>%\n    summarise(Media = mean(Valor, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(df_day, aes(Date, Valor)) +\n    stat_summary(fun=\"mean\", geom=\"col\", fill=\"grey70\") +\n    geom_hline(data=df_mean, aes(yintercept=Media, linetype=\"média período\"), colour=\"black\") +\n    facet_wrap(~Poluente, scales=\"free_y\") +\n    scale_x_date(breaks=\"1 month\", labels=scales::label_date_short()) +\n    theme_bw() +\n    labs(x=\"Data\", y=\"Concentração\", linetype=\"\", title=\"Médias diárias por poluente\") +\n    theme(legend.position=\"bottom\")\n}\n```\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}