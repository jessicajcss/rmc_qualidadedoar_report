[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Relatório Técnico Interativo — Qualidade do Ar (RMC)",
    "section": "",
    "text": "Este relatório apresenta a caracterização da qualidade do ar e meteorologia em municípios selecionados da Região Metropolitana de Curitiba (RMC), com base em:\n\nSensores GM-5000 (gases + PM)\nSensores PurpleAir (PM2.5)\nDados meteorológicos (vento, temperatura, umidade, precipitação, pressão, radiação)\nCálculo e representação de AQI / diretrizes da OMS\n\nConteúdos principais: 1. Fontes e estrutura dos dados 2. Séries e climatologia meteorológica 3. Integração com dashboard Shiny 4. Padrões temporais hora × dia da semana 5. Influência meteorológica (polar plots / rosas) 6. Mapas de sensores e concentrações médias 7. Estatísticas resumidas (aqStats) 8. Anexos (sessão, tabelas WHO / AQI)\nO dashboard interativo está disponível também como capítulo (iframe) e/ou separado via shinyapps.io.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Visão Geral</span>"
    ]
  },
  {
    "objectID": "01-dados.html",
    "href": "01-dados.html",
    "title": "2  Dados e Métodos",
    "section": "",
    "text": "2.1 Objetos carregados\nCode\nls()\n\n\ncharacter(0)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Dados e Métodos</span>"
    ]
  },
  {
    "objectID": "01-dados.html#objetos-carregados",
    "href": "01-dados.html#objetos-carregados",
    "title": "2  Dados e Métodos",
    "section": "",
    "text": "2.1.1 Meteorologia (horária)\n\n\nCode\nif (exists(\"meteo_hour\")) dplyr::glimpse(meteo_hour)\n\n\n\n\n2.1.2 Qualidade do ar — diário (GM-5000)\n\n\nCode\nif (exists(\"Datafinal\")) dplyr::glimpse(Datafinal)\n\n\n\n\n2.1.3 Qualidade do ar — horário (GM-5000)\n\n\nCode\nif (exists(\"air_quality_data_ugm3\")) dplyr::glimpse(air_quality_data_ugm3)\n\n\n\n\n2.1.4 PurpleAir (PM2.5 diário corrigido)\n\n\nCode\nif (exists(\"purpleair\")) dplyr::glimpse(purpleair)\n\n\n\n\n2.1.5 Tabelas auxiliares (AQI e precauções)\n\n\nCode\nif (exists(\"Poltab\")) head(Poltab)\nif (exists(\"AQItab\")) head(AQItab)",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Dados e Métodos</span>"
    ]
  },
  {
    "objectID": "01-dados.html#diretrizes-oms",
    "href": "01-dados.html#diretrizes-oms",
    "title": "2  Dados e Métodos",
    "section": "2.2 Diretrizes OMS",
    "text": "2.2 Diretrizes OMS\n\n\nCode\nif (exists(\"who_limit_all\")) who_limit_all",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Dados e Métodos</span>"
    ]
  },
  {
    "objectID": "01-dados.html#nota-sobre-horários-e-tz",
    "href": "01-dados.html#nota-sobre-horários-e-tz",
    "title": "2  Dados e Métodos",
    "section": "2.3 Nota sobre horários e TZ",
    "text": "2.3 Nota sobre horários e TZ\nTodas as datas são normalizadas para “America/Sao_Paulo”. Manter consistência é essencial para agregações diárias e cálculo de médias móveis (ex.: O3 8h).",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Dados e Métodos</span>"
    ]
  },
  {
    "objectID": "02-meteorologia.html",
    "href": "02-meteorologia.html",
    "title": "3  Caracterização Meteorológica",
    "section": "",
    "text": "Code\nlibrary(openair)\nlibrary(ggplot2)\nlibrary(scales)\n\n\n\n3.0.1 Séries horárias\n\n\nCode\nif (exists(\"meteo_hour\")) {\n  meteo_hour %&gt;%\n    filter(Cidade %in% c(\"Rio Branco do Sul\", \"Almirante Tamandaré\")) %&gt;%\n    openair::timePlot(pollutant = c(\"press\",\"temp\",\"rad\",\"umid\",\"prec\",\"ws\"),\n                      y.relation = \"free\")\n}\n\n\n\n\n3.0.2 Rosa de vento (velocidade como variável)\n\n\nCode\nif (exists(\"meteo_hour\")) {\n  meteo_hour %&gt;%\n    filter(Cidade %in% c(\"Rio Branco do Sul\",\"Almirante Tamandaré\")) %&gt;%\n    openair::pollutionRose(pollutant = \"ws\", type = \"Cidade\",\n                           hemisphere = \"southern\",\n                           key.footer = \"Velocidade do vento (m/s)\")\n}\n\n\n\n\n3.0.3 Sazonalidade (vento)\n\n\nCode\nif (exists(\"meteo_hour\")) {\n  meteo_hour %&gt;%\n    filter(Cidade %in% c(\"Rio Branco do Sul\",\"Almirante Tamandaré\")) %&gt;%\n    openair::cutData(hemisphere = \"southern\", type = \"season\") %&gt;%\n    openair::pollutionRose(pollutant = \"ws\", type = c(\"season\",\"Cidade\"),\n                           hemisphere = \"southern\",\n                           key.footer = \"Velocidade do vento (m/s)\")\n}\n\n\n\n\n3.0.4 Climatologia diária simplificada\n\n\nCode\nif (exists(\"meteo_hour\")) {\n  meteo_day &lt;- meteo_hour %&gt;%\n    mutate(date = lubridate::floor_date(date,\"day\")) %&gt;%\n    group_by(Cidade, date) %&gt;%\n    summarise(temp = mean(temp, na.rm=TRUE),\n              umid = mean(umid, na.rm=TRUE),\n              prec = sum(prec, na.rm=TRUE),\n              .groups=\"drop\")\n  ggplot(meteo_day, aes(x=date)) +\n    geom_col(aes(y=prec*10, fill=\"Precipitação\"), alpha=0.4) +\n    geom_line(aes(y=temp, color=\"Temperatura\"), linewidth=0.6) +\n    geom_line(aes(y=umid, color=\"Umidade Relativa\"), linewidth=0.6) +\n    scale_y_continuous(sec.axis = sec_axis(~./10, name=\"Precipitação (mm)\")) +\n    facet_wrap(.~Cidade, scales=\"free_y\") +\n    scale_fill_manual(values=\"darkgreen\") +\n    scale_color_manual(values=c(\"Temperatura\"=\"red\",\"Umidade Relativa\"=\"blue\")) +\n    theme_bw() +\n    labs(y=\"Temp (°C) / UR (%)\", x=\"Data\", fill=\"\", color=\"\", title=\"Climatologia diária (Temp, UR e Precipitação)\") +\n    scale_x_date(labels = scales::label_date_short(), breaks=\"1 month\")\n}",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Caracterização Meteorológica</span>"
    ]
  },
  {
    "objectID": "03-shiny-dashboard.html",
    "href": "03-shiny-dashboard.html",
    "title": "4  Dashboard Shiny Integrado",
    "section": "",
    "text": "O dashboard interativo faz cálculo de AQI, exibe mapas leaflet, séries temporais e correlações.\n\n4.0.1 Versão pública (shinyapps.io)\nDashboard em produção\n\n\n4.0.2 Iframe\n\n\n\n4.0.3 Código-Fonte\nO arquivo app.R incluído no repositório pode ser executado localmente após carregar dependências:\nshiny::runApp()\nPrincipais pontos: - Carregamento global dos dados - Uso de pollutionRose, aqStats, polarMap - Escalas de cores do AQI com colorBin - Evita repetição de IDs (corrigido) - Integra PurpleAir + GM-5000 num único objeto combinado",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Dashboard Shiny Integrado</span>"
    ]
  },
  {
    "objectID": "04-qualidade-ar.html",
    "href": "04-qualidade-ar.html",
    "title": "5  Padrões Temporais da Qualidade do Ar",
    "section": "",
    "text": "Code\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate)\nlibrary(ggh4x)\nlibrary(reshape2)\n\n\n\n5.0.1 Padrão hora × dia da semana (GM-5000 horário)\n\n\nCode\nif (exists(\"air_quality_data_ugm3\")) {\n  gm_hour &lt;- air_quality_data_ugm3 %&gt;%\n    mutate(hr = hour(date),\n           wday = wday(date, label = TRUE)) %&gt;%\n    pivot_longer(-c(Cidade,date,hr,wday), names_to=\"Poluente\", values_to=\"Valor\") %&gt;%\n    group_by(Cidade, Poluente, wday, hr) %&gt;%\n    summarise(Media = mean(Valor, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(gm_hour, aes(hr, Media, colour=wday)) +\n    geom_line(linewidth=0.4) +\n    facet_nested(Poluente ~ Cidade, scales=\"free_y\") +\n    scale_x_continuous(breaks=seq(0,24,4)) +\n    theme_classic() +\n    labs(x=\"Hora\", y=\"Média horária\", colour=\"Dia\", title=\"Padrões hora × dia da semana (GM-5000)\")\n}\n\n\n\n\n5.0.2 Padrão hora × dia da semana (PurpleAir)\n\n\nCode\nif (exists(\"purpleair\")) {\n  pa_hour &lt;- purpleair %&gt;%\n    mutate(hr = hour(Date),\n           wday = wday(Date, label = TRUE)) %&gt;%\n    group_by(Cidade, sensor_id, wday, hr) %&gt;%\n    summarise(PM25 = mean(PM2.5, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(pa_hour, aes(hr, PM25, colour=wday)) +\n    geom_line(linewidth=0.4) +\n    facet_nested(. ~ Cidade + sensor_id, scales=\"free_y\") +\n    scale_x_continuous(breaks=seq(0,24,4)) +\n    theme_classic() +\n    labs(x=\"Hora\", y=\"PM2.5 (µg/m³)\", colour=\"Dia\", title=\"Padrões hora × dia da semana (PurpleAir)\")\n}\n\n\n\n\n5.0.3 Comparação com Limites OMS (diário GM-5000)\n\n\nCode\nif (exists(\"Datafinal\")) {\n  df_day &lt;- Datafinal %&gt;%\n    select(Cidade, Date, SO2, NO2, PM2.5, PM10, O3, CO) %&gt;%\n    pivot_longer(-c(Cidade, Date), names_to=\"Poluente\", values_to=\"Valor\")\n\n  df_mean &lt;- df_day %&gt;%\n    group_by(Cidade, Poluente) %&gt;%\n    summarise(Media = mean(Valor, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(df_day, aes(Date, Valor)) +\n    stat_summary(fun=\"mean\", geom=\"col\", fill=\"grey70\") +\n    geom_hline(data=df_mean, aes(yintercept=Media, linetype=\"média período\"), colour=\"black\") +\n    facet_wrap(~Poluente, scales=\"free_y\") +\n    scale_x_date(breaks=\"1 month\", labels=scales::label_date_short()) +\n    theme_bw() +\n    labs(x=\"Data\", y=\"Concentração\", linetype=\"\", title=\"Médias diárias por poluente\") +\n    theme(legend.position=\"bottom\")\n}",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Padrões Temporais da Qualidade do Ar</span>"
    ]
  },
  {
    "objectID": "05-fontes-meteo.html",
    "href": "05-fontes-meteo.html",
    "title": "6  Meteorologia e Potenciais Fontes (Polar / Vento)",
    "section": "",
    "text": "Code\nlibrary(openair)\n\n\n\n6.0.1 Polar plots (exemplo NO2)\n\n\nCode\nif (exists(\"air_quality_data_ugm3\") && exists(\"meteo_hour\")) {\n  joined &lt;- air_quality_data_ugm3 %&gt;%\n    left_join(meteo_hour %&gt;% select(date, ws, wd, Cidade), by=\"date\")\n\n  joined %&gt;%\n    filter(Cidade == \"Rio Branco do Sul\") %&gt;%\n    openair::polarPlot(pollutant=\"NO2\", ws=\"ws\", wd=\"wd\", main=\"NO2 vs. vento — RBS\")\n}\n\n\n\n\n6.0.2 pollutionRose aplicado a PM2.5 sintetizado\n\n\nCode\nif (exists(\"purpleair\") && exists(\"meteo_hour\")) {\n  pa_join &lt;- purpleair %&gt;%\n    left_join(meteo_hour %&gt;% select(date, ws, wd, Cidade), by=c(\"Date\"=\"date\"))\n\n  pa_join %&gt;%\n    openair::pollutionRose(pollutant=\"PM2.5\", type=\"Cidade\", hemisphere=\"southern\",\n                           key.footer=\"PM2.5 (µg/m³)\")\n}",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Meteorologia e Potenciais Fontes (Polar / Vento)</span>"
    ]
  },
  {
    "objectID": "06-mapas.html",
    "href": "06-mapas.html",
    "title": "7  Mapas Interativos",
    "section": "",
    "text": "Code\nlibrary(leaflet)\n\n\nCaso os dados de localização estejam no objeto localizacao, geramos mapa interativo dos sensores.\n\n\nCode\nif (exists(\"localizacao\")) {\n  df_map &lt;- localizacao %&gt;%\n    mutate(popup = paste0(\"&lt;b&gt;\", Local, \"&lt;/b&gt;&lt;br/&gt;Cidade: \", Cidade,\n                          \"&lt;br/&gt;Tipo: \", Tipo))\n  pal &lt;- colorFactor(RColorBrewer::brewer.pal(5,\"Set2\"), df_map$Cidade)\n\n  leaflet(df_map) %&gt;%\n    addTiles() %&gt;%\n    addCircleMarkers(~Long, ~Lat,\n                     color=~pal(Cidade),\n                     radius=6,\n                     stroke=TRUE, weight=1,\n                     fillOpacity=0.8,\n                     popup=~popup) %&gt;%\n    addLegend(\"bottomright\", pal=pal, values=~Cidade, title=\"Cidade\")\n}",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Mapas Interativos</span>"
    ]
  },
  {
    "objectID": "07-estatisticas.html",
    "href": "07-estatisticas.html",
    "title": "8  Estatísticas Resumidas",
    "section": "",
    "text": "Code\nlibrary(openair)\nlibrary(DT)\n\n\n\n8.0.1 aqStats (GM-5000)\n\n\nCode\nif (exists(\"air_quality_data_ugm3\")) {\n  stats_gm &lt;- air_quality_data_ugm3 %&gt;%\n    aqStats(type=\"Cidade\", pollutant=c(\"SO2\",\"NO2\",\"O3\",\"CO\",\"PM2.5\",\"PM10\"))\n  DT::datatable(stats_gm)\n}\n\n\n\n\n8.0.2 aqStats (PurpleAir PM2.5)\n\n\nCode\nif (exists(\"purpleair\")) {\n  stats_pa &lt;- purpleair %&gt;%\n    select(Cidade, Date, PM2.5) %&gt;%\n    rename(date = Date) %&gt;%\n    aqStats(type=\"Cidade\", pollutant=\"PM2.5\")\n  DT::datatable(stats_pa)\n}",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Estatísticas Resumidas</span>"
    ]
  },
  {
    "objectID": "08-anexos.html",
    "href": "08-anexos.html",
    "title": "9  Anexos",
    "section": "",
    "text": "9.0.1 Tabela AQI\n\n\nCode\nif (exists(\"AQItab\")) DT::datatable(AQItab)\n\n\n\n\n9.0.2 Poltab (Precauções)\n\n\nCode\nif (exists(\"Poltab\")) DT::datatable(Poltab)\n\n\n\n\n9.0.3 Sessão\n\n\nCode\nsessionInfo()\n\n\nR version 4.4.3 (2025-02-28 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=Portuguese_Brazil.utf8  LC_CTYPE=Portuguese_Brazil.utf8   \n[3] LC_MONETARY=Portuguese_Brazil.utf8 LC_NUMERIC=C                      \n[5] LC_TIME=Portuguese_Brazil.utf8    \n\ntime zone: America/Sao_Paulo\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] htmlwidgets_1.6.4 compiler_4.4.3    fastmap_1.2.0     cli_3.6.5        \n [5] tools_4.4.3       htmltools_0.5.8.1 rstudioapi_0.17.1 yaml_2.3.10      \n [9] codetools_0.2-20  rmarkdown_2.29    knitr_1.50        jsonlite_2.0.0   \n[13] xfun_0.53         digest_0.6.37     rlang_1.1.6       evaluate_1.0.5",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Anexos</span>"
    ]
  }
]