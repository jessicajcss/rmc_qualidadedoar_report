[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Visão Geral",
    "section": "",
    "text": "Este relatório apresenta a caracterização da qualidade do ar e meteorologia em municípios selecionados da Região Metropolitana de Curitiba (RMC), com base em:\n\nSensores GM-5000 (gases + PM)\nSensores PurpleAir (PM2.5)\nDados meteorológicos (vento, temperatura, umidade, precipitação, pressão, radiação)\nCálculo e representação de AQI / diretrizes da OMS\n\nConteúdos principais: 1. Fontes e estrutura dos dados 2. Séries e climatologia meteorológica 3. Integração com dashboard Shiny 4. Padrões temporais hora × dia da semana 5. Influência meteorológica (polar plots / rosas) 6. Mapas de sensores e concentrações médias 7. Estatísticas resumidas (aqStats) 8. Anexos (sessão, tabelas WHO / AQI)\nO dashboard interativo está disponível também como capítulo (iframe) e/ou separado via shinyapps.io.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Visão Geral</span>"
    ]
  },
  {
    "objectID": "00-setup.html",
    "href": "00-setup.html",
    "title": "1  Setup (carregamento de dados e opções)",
    "section": "",
    "text": "1.0.1 Diagnóstico: status dos dados carregados\nEste chunk executa um resumo de presença/dimensão dos objetos de dados esperados e grava um relatório em _book/debug_data_status.csv e _book/debug_data_status.txt. Se os objetos não existirem, o relatório mostrará quais estão faltando — isso ajuda a identificar se o problema é download/remoto, nome de objeto diferente, ou falha silenciosa.\n\n# roda o verificador e mostra a tabela no HTML\nif (file.exists(\"scripts/check_data.R\")) {\n  report &lt;- tryCatch({\n    source(\"scripts/check_data.R\", local = TRUE)\n    # 'report' foi retornado pela fonte\n    if (exists(\"report\")) {\n      report &lt;- get(\"report\")\n    } else {\n      # se o script usou return, pegue o último valor\n      report &lt;- NULL\n    }\n    report\n  }, error = function(e) {\n    tibble::tibble(object = \"check_data\", present = FALSE, info = paste0(\"erro: \", e$message))\n  })\n} else {\n  report &lt;- tibble::tibble(object = \"check_data.R\", present = FALSE, info = \"arquivo inexistente\")\n}\n\n# Mostra um resumo amigável\nif (!is.null(report)) {\n  knitr::kable(report, caption = \"Relatório de disponibilidade de objetos de dados (gerado por scripts/check_data.R)\")\n} else {\n  cat(\"Relatório de diagnóstico não gerado.\\n\")\n}\n\n\nRelatório de disponibilidade de objetos de dados (gerado por scripts/check_data.R)\n\n\n\n\n\n\n\n\n\nobject\npresent\ninfo\nrows\ncols\n\n\n\n\nlocalizacao\nTRUE\ndata.frame/tibble (19 x 5)\n19\n5\n\n\nPoltab\nTRUE\ndata.frame/tibble (6 x 4)\n6\n4\n\n\nAQItab\nTRUE\ndata.frame/tibble (6 x 4)\n6\n4\n\n\nmeteo_hour\nTRUE\ndata.frame/tibble (56120 x 10)\n56120\n10\n\n\nDatafinal\nTRUE\ndata.frame/tibble (1495 x 17)\n1495\n17\n\n\nair_quality_data_ugm3\nTRUE\ndata.frame/tibble (36848 x 9)\n36848\n9\n\n\npurpleair\nTRUE\ndata.frame/tibble (22983 x 8)\n22983\n8\n\n\ndf_instantaneo\nTRUE\ndata.frame/tibble (472373 x 9)\n472373\n9",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Setup (carregamento de dados e opções)</span>"
    ]
  },
  {
    "objectID": "01-dados.html",
    "href": "01-dados.html",
    "title": "3  Dados e Métodos",
    "section": "",
    "text": "3.1 Objetos carregados\n#source(\"scripts/load_cached_data.R\")\n\nls()\n\n [1] \"air_quality_data_ugm3\" \"AQItab\"                \"Datafinal\"            \n [4] \"df_instantaneo\"        \"f\"                     \"files\"                \n [7] \"localizacao\"           \"meteo_hour\"            \"nm\"                   \n[10] \"obj\"                   \"Poltab\"                \"proc_dir\"             \n[13] \"proj_loader\"           \"purpleair\"",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dados e Métodos</span>"
    ]
  },
  {
    "objectID": "01-dados.html#objetos-carregados",
    "href": "01-dados.html#objetos-carregados",
    "title": "3  Dados e Métodos",
    "section": "",
    "text": "3.1.1 Meteorologia (horária)\n\nif (exists(\"meteo_hour\")) dplyr::glimpse(meteo_hour)\n\nRows: 56,120\nColumns: 10\n$ Cidade &lt;chr&gt; \"Rio Branco do Sul\", \"Rio Branco do Sul\", \"Rio Branco do Sul\", …\n$ date   &lt;dttm&gt; 2023-07-11 07:00:00, 2023-07-11 08:00:00, 2023-07-11 09:00:00,…\n$ temp   &lt;dbl&gt; 17.86667, 17.36667, 17.76667, 16.20000, 16.20000, 16.20000, 16.…\n$ ws     &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ wd     &lt;dbl&gt; 188.6667, 151.6667, 164.3333, 165.0000, 165.0000, 165.0000, 165…\n$ prec   &lt;dbl&gt; 0.3, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0…\n$ umid   &lt;dbl&gt; 86.00000, 89.83333, 88.33333, 86.00000, 85.50000, 85.00000, 85.…\n$ rad    &lt;dbl&gt; 2809.833, 6671.150, 11304.850, 0.000, 0.000, 0.000, 0.000, 0.00…\n$ press  &lt;dbl&gt; 1020.217, 1019.550, 1019.333, 1022.325, 1022.333, 1022.580, 102…\n$ uv     &lt;dbl&gt; 0.0000000, 0.1666667, 0.1666667, 0.0000000, 0.0000000, 0.000000…\n\n\n\n\n3.1.2 Qualidade do ar — diário (GM-5000)\n\nif (exists(\"Datafinal\")) dplyr::glimpse(Datafinal)\n\nRows: 1,495\nColumns: 17\n$ Cidade        &lt;fct&gt; Almirante Tamandaré, Almirante Tamandaré, Almirante Tama…\n$ Date          &lt;date&gt; 2023-08-16, 2023-08-17, 2023-08-18, 2023-08-19, 2023-08…\n$ SO2           &lt;dbl&gt; 75.06737, 208.84238, 194.06122, 181.68172, 190.48055, 16…\n$ NO2           &lt;dbl&gt; 28.14517, 84.71907, 82.59153, 59.72603, 70.30730, 58.853…\n$ PM2.5         &lt;dbl&gt; 5.2086111, 13.6665499, 14.1677083, 3.9767014, 4.3888542,…\n$ PM10          &lt;dbl&gt; 23.133889, 81.132936, 81.460278, 18.335486, 21.405243, 1…\n$ O3            &lt;dbl&gt; NA, 33.78754, 38.34066, 48.55573, 38.59240, 41.85478, 32…\n$ CO            &lt;dbl&gt; NA, 0.85710937, 0.75336979, 0.17920833, 0.48168229, 0.38…\n$ AQI_SO2       &lt;dbl&gt; 41, 103, 99, 93, 97, 85, 110, 89, 87, 105, 26, 65, 43, 2…\n$ AQI_NO2       &lt;dbl&gt; 14, 43, 41, 30, 35, 30, 44, 26, 21, 43, 13, 21, 15, 18, …\n$ AQI_O3        &lt;dbl&gt; NA, 16, 18, 23, 18, 20, 16, 29, 29, 26, 15, 19, 18, 17, …\n$ AQI_CO        &lt;dbl&gt; NA, 8, 7, 2, 5, 4, 7, 2, 3, 5, 0, 0, 1, 1, 1, 3, 6, 4, 4…\n$ AQI_PM25      &lt;dbl&gt; 29, 60, 60, 22, 24, 18, 51, 26, 28, 19, 3, 7, 6, 8, 11, …\n$ AQI_PM10      &lt;dbl&gt; 21, 64, 64, 17, 20, 13, 49, 15, 21, 13, 2, 5, 3, 5, 17, …\n$ AQI           &lt;dbl&gt; 41, 103, 99, 93, 97, 85, 110, 89, 87, 105, 26, 65, 43, 2…\n$ AQI_Qualidade &lt;chr&gt; \"Boa\", \"Ruim para grupos sensíveis\", \"Moderada\", \"Modera…\n$ Year          &lt;chr&gt; \"2023\", \"2023\", \"2023\", \"2023\", \"2023\", \"2023\", \"2023\", …\n\n\n\n\n3.1.3 Qualidade do ar — horário (GM-5000)\n\nif (exists(\"air_quality_data_ugm3\")) dplyr::glimpse(air_quality_data_ugm3)\n\nRows: 36,848\nColumns: 9\n$ Cidade    &lt;fct&gt; Almirante Tamandaré, Almirante Tamandaré, Almirante Tamandar…\n$ date      &lt;dttm&gt; 2023-08-03 06:00:00, 2023-08-03 07:00:00, 2023-08-03 08:00:…\n$ SO2       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ NO2       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ O3        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ CO        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ PM2.5     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ PM10      &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ rh_sensor &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n\n\n\n\n3.1.4 PurpleAir (PM2.5 diário corrigido)\n\nif (exists(\"purpleair\")) dplyr::glimpse(purpleair)\n\nRows: 22,983\nColumns: 8\nRowwise: Cidade, sample_day\n$ Cidade        &lt;chr&gt; \"Almirante Tamandaré\", \"Almirante Tamandaré\", \"Almirante…\n$ Tipo          &lt;chr&gt; \"outdoor\", \"outdoor\", \"outdoor\", \"outdoor\", \"outdoor\", \"…\n$ sensor_id     &lt;chr&gt; \"Prefeitura\", \"Prefeitura\", \"Prefeitura\", \"Prefeitura\", …\n$ PM2.5         &lt;dbl&gt; 11.837499, 21.958121, 18.158913, 14.643786, 8.278813, 4.…\n$ sample_day    &lt;date&gt; 2023-07-24, 2023-07-25, 2023-07-26, 2023-07-27, 2023-07…\n$ AQI_PM2.5     &lt;dbl&gt; 56, 75, 68, 61, 46, 27, 29, 66, 78, 72, 73, 85, 90, 88, …\n$ AQI_Qualidade &lt;chr&gt; \"Moderada\", \"Moderada\", \"Moderada\", \"Moderada\", \"Boa\", \"…\n$ Date          &lt;date&gt; 2023-07-24, 2023-07-25, 2023-07-26, 2023-07-27, 2023-07…\n\n\n\n\n3.1.5 Tabelas auxiliares (AQI e precauções)\n\nif (exists(\"Poltab\")) head(Poltab)\n\n                                                                                   Grupos.Sensíveis\n1 Pessoas com problemas respiratórios e cardíacos, idosos e crianças săo os grupos sob maior risco.\n2 Pessoas com problemas respiratórios e cardíacos, idosos e crianças săo os grupos sob maior risco.\n3 Pessoas com asma e outras doenças respiratórias, idosos e crianças săo os grupos sob maior risco.\n4                               Pessoas com doenças cardíacas  compreendem o grupo sob maior risco.\n5                                             Pessoas com asma compreendem o grupo sob maior risco.\n6                                        Crianças e pessoas com asma săo os grupos sob maior risco.\n                                                                                                                                                                                                                Efeitos.na.saúde\n1                                            Agravamento grave de doença cardíaca ou pulmonar e mortalidade prematura em pessoas com doença cardiopulmonar e idosos. Risco grave de efeitos respiratórios na populaçăo em geral.\n2                                                       Aumento significativo dos sintomas respiratórios e agravamento de doenças pulmonares, como asma. Aumento da probabilidade de efeitos respiratórios na populaçăo em geral\n3  Efeitos respiratórios graves e respiraçăo prejudicada săo prováveis em crianças ativas, idosos e pessoas com doenças pulmonares, como asma  e efeitos respiratórios cada vez mais graves săo prováveis na populaçăo em geral.\n4                                                     Agravamento grave dos sintomas cardiovasculares, como dor no peito, em pessoas com doença cardiovascular, comprometimento de atividades extenuantes na populaçăo em geral.\n5                                                                                    Aumento dos sintomas respiratórios, como aperto no peito e chiado em pessoas com asma. Possível agravamento de doença cardíaca ou pulmonar.\n6      Sintomas cada vez mais graves e respiraçăo prejudicada săo prováveis em crianças e adultos ativos e pessoas com doenças respiratórias, como asma. Probabilidade crescente de efeitos respiratórios na populaçăo em geral.\n                                                                                                                                                                                            Precauções\n1                                           Todos devem evitar qualquer esforço ao ar livre. Pessoas com doenças respiratórias ou cardíacas, idosos e crianças devem permanecer em ambientes fechados.\n2                    Pessoas com doenças respiratórias, como asma, devem evitar qualquer atividade ao ar livre. Todos os outros, especialmente idosos e crianças, devem limitar o esforço ao ar livre.\n3                    Crianças, idosos e pessoas com doenças pulmonares, como asma, devem permanecer em ambientes fechados. Todos os outros, especialmente crianças, devem evitar esforços ao ar livre.\n4                                     Pessoas com doenças cardiovasculares, como angina, devem evitar esforços e fontes de CO, como trânsito intenso. Todos os outros devem limitar esforços intensos.\n5                                                                                             Crianças, asmáticos e pessoas com doenças cardíacas ou pulmonares devem limitar os esforços ao ar livre.\n6  Crianças e adultos ativos, e pessoas com doenças respiratórias, como asma, devem evitar qualquer esforço ao ar livre. Todos os outros, especialmente crianças, devem limitar o esforço ao ar livre.\n  Poluente\n1    PM2.5\n2     PM10\n3      NO2\n4       CO\n5      SO2\n6       O3\n\nif (exists(\"AQItab\")) head(AQItab)\n\n       IQA      Nível.de.poluição.atmosférica\n1    0––50                                Bom\n2  51––100                           Moderado\n3 101––150 Não saudável para grupos sensíveis\n4 151––200                     Pouco saudável\n5 201––300          Muito prejudicial à saúde\n6     300+                           Perigoso\n                                                                                                                                                                                    Implicações.para.a.saúde\n1                                                                                                     A qualidade do ar é considerada satisfatória e a poluição atmosférica representa pouco ou nenhum risco\n2 A qualidade do ar é aceitável; no entanto, para alguns poluentes, pode haver um problema moderado de saúde para um número muito pequeno de pessoas que são invulgarmente sensíveis à poluição atmosférica.\n3                                                                                              Membros de grupos sensíveis podem sofrer efeitos na saúde. O público em geral provavelmente não será afetado.\n4                                                                                   Todos podem começar a sentir efeitos na saúde; membros de grupos sensíveis podem sofrer efeitos mais graves para a saúde\n5                                                                                              Advertências de saúde sobre condições de emergência. Toda a população tem maior probabilidade de ser afetada.\n6                                                                                                                                       Alerta de saúde: todos podem sofrer efeitos mais graves para a saúde\n                                                                                                                                                                                            Declaração.de.advertência\n1                                                                                                                                                                                                              Nenhum\n2                                                                                           Crianças e adultos ativos e pessoas com doenças respiratórias, como asma, devem limitar o esforço prolongado ao ar livre.\n3                                                                                           Crianças e adultos ativos e pessoas com doenças respiratórias, como asma, devem limitar o esforço prolongado ao ar livre.\n4 Crianças e adultos ativos e pessoas com doenças respiratórias, como asma, devem evitar esforços prolongados ao ar livre; todos os outros, especialmente as crianças, devem limitar o esforço prolongado ao ar livre\n5            Crianças e adultos ativos e pessoas com doenças respiratórias, como asma, devem evitar todos os esforços ao ar livre; todos os outros, especialmente as crianças, devem limitar os esforços ao ar livre.\n6                                                                                                                                                                    Todos devem evitar todos os esforços ao ar livre",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dados e Métodos</span>"
    ]
  },
  {
    "objectID": "01-dados.html#diretrizes-oms",
    "href": "01-dados.html#diretrizes-oms",
    "title": "3  Dados e Métodos",
    "section": "3.2 Diretrizes OMS",
    "text": "3.2 Diretrizes OMS\n\nif (exists(\"who_limit_all\")) who_limit_all",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dados e Métodos</span>"
    ]
  },
  {
    "objectID": "01-dados.html#nota-sobre-horários-e-tz",
    "href": "01-dados.html#nota-sobre-horários-e-tz",
    "title": "3  Dados e Métodos",
    "section": "3.3 Nota sobre horários e TZ",
    "text": "3.3 Nota sobre horários e TZ\nTodas as datas são normalizadas para “America/Sao_Paulo”. Manter consistência é essencial para agregações diárias e cálculo de médias móveis (ex.: O3 8h).",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Dados e Métodos</span>"
    ]
  },
  {
    "objectID": "02-meteorologia.html",
    "href": "02-meteorologia.html",
    "title": "4  Caracterização Meteorológica",
    "section": "",
    "text": "library(openair)\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(tidyverse)\n#source(\"scripts/load_cached_data.R\")\n\n\n4.0.1 Séries horárias\n\nif (exists(\"meteo_hour\")) {\n  meteo_hour %&gt;%\n    filter(Cidade %in% c(\"Rio Branco do Sul\", \"Almirante Tamandaré\")) %&gt;%\n    openair::timePlot(pollutant = c(\"press\",\"temp\",\"rad\",\"umid\",\"prec\",\"ws\"),\n                      y.relation = \"free\")\n}\n\n\n\n\n\n\n\n\n\n\n4.0.2 Rosa de vento (velocidade como variável)\n\nif (exists(\"meteo_hour\")) {\n  meteo_hour %&gt;%\n    filter(Cidade %in% c(\"Rio Branco do Sul\",\"Almirante Tamandaré\")) %&gt;%\n    openair::pollutionRose(pollutant = \"ws\", type = \"Cidade\",\n                           hemisphere = \"southern\",\n                           key.footer = \"Velocidade do vento (m/s)\")\n}\n\n\n\n\n\n\n\n\n\n\n4.0.3 Sazonalidade (vento)\n\nif (exists(\"meteo_hour\")) {\n  meteo_hour %&gt;%\n    filter(Cidade %in% c(\"Rio Branco do Sul\",\"Almirante Tamandaré\")) %&gt;%\n    openair::cutData(hemisphere = \"southern\", type = \"season\") %&gt;%\n    openair::pollutionRose(pollutant = \"ws\", type = c(\"season\",\"Cidade\"),\n                           hemisphere = \"southern\",\n                           key.footer = \"Velocidade do vento (m/s)\")\n}\n\n\n\n\n\n\n\n\n\n\n4.0.4 Climatologia diária simplificada\n\nif (exists(\"meteo_hour\")) {\n  meteo_day &lt;- meteo_hour %&gt;%\n    mutate(date = lubridate::floor_date(date,\"day\")) %&gt;%\n    group_by(Cidade, date) %&gt;%\n    summarise(temp = mean(temp, na.rm=TRUE),\n              umid = mean(umid, na.rm=TRUE),\n              prec = sum(prec, na.rm=TRUE),\n              .groups=\"drop\")\n  ggplot(meteo_day, aes(x=date)) +\n    geom_col(aes(y=prec*10, fill=\"Precipitação\"), alpha=0.4) +\n    geom_line(aes(y=temp, color=\"Temperatura\"), linewidth=0.6) +\n    geom_line(aes(y=umid, color=\"Umidade Relativa\"), linewidth=0.6) +\n    scale_y_continuous(sec.axis = sec_axis(~./10, name=\"Precipitação (mm)\")) +\n    facet_wrap(.~Cidade, scales=\"free_y\") +\n    scale_fill_manual(values=\"darkgreen\") +\n    scale_color_manual(values=c(\"Temperatura\"=\"red\",\"Umidade Relativa\"=\"blue\")) +\n    theme_bw() +\n    labs(y=\"Temp (°C) / UR (%)\", x=\"Data\", fill=\"\", color=\"\", title=\"Climatologia diária (Temp, UR e Precipitação)\") +\n    scale_x_date(labels = scales::label_date_short(), breaks=\"1 month\")\n}",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Caracterização Meteorológica</span>"
    ]
  },
  {
    "objectID": "03-shiny-dashboard.html",
    "href": "03-shiny-dashboard.html",
    "title": "5  Dashboard Shiny Integrado",
    "section": "",
    "text": "O dashboard interativo faz cálculo de AQI, exibe mapas leaflet, séries temporais e correlações.\n\n5.0.1 Versão pública (shinyapps.io)\nDashboard em produção\n\n\n5.0.2 Iframe\n\n\n\n5.0.3 Código-Fonte\nO arquivo app.R incluído no repositório pode ser executado localmente após carregar dependências:\nshiny::runApp()\nPrincipais pontos: - Carregamento global dos dados - Uso de pollutionRose, aqStats, polarMap - Escalas de cores do AQI com colorBin - Evita repetição de IDs (corrigido) - Integra PurpleAir + GM-5000 num único objeto combinado",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Dashboard Shiny Integrado</span>"
    ]
  },
  {
    "objectID": "04-qualidade-ar.html",
    "href": "04-qualidade-ar.html",
    "title": "6  Padrões Temporais da Qualidade do Ar",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate)\nlibrary(ggh4x)\nlibrary(reshape2)\n#source(\"scripts/load_cached_data.R\")\n\n\n6.0.1 Padrão hora × dia da semana (GM-5000 horário)\n\nif (exists(\"air_quality_data_ugm3\")) {\n  gm_hour &lt;- air_quality_data_ugm3 %&gt;%\n    mutate(hr = hour(date),\n           wday = lubridate::wday(date, label = TRUE)) %&gt;%\n    tidyr::pivot_longer(-c(Cidade,date,hr,wday), names_to=\"Poluente\", values_to=\"Valor\") %&gt;%\n    group_by(Cidade, Poluente, wday, hr) %&gt;%\n    summarise(Media = mean(Valor, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(gm_hour, aes(hr, Media, colour=wday)) +\n    geom_line(linewidth=0.4) +\n    ggh4x::facet_nested(Poluente ~ Cidade, scales=\"free_y\") +\n    scale_x_continuous(breaks=seq(0,24,4)) +\n    theme_classic() +\n    labs(x=\"Hora\", y=\"Média horária\", colour=\"Dia\", title=\"Padrões hora × dia da semana (GM-5000)\")\n}\n\n\n\n\n\n\n\n\n\n\n6.0.2 Padrão hora × dia da semana (PurpleAir)\n\nif (exists(\"purpleair\")) {\n  pa_hour &lt;- purpleair %&gt;%\n    mutate(hr = hour(Date),\n           wday = lubridate::wday(Date, label = TRUE)) %&gt;%\n    group_by(Cidade, sensor_id, wday, hr) %&gt;%\n    summarise(PM25 = mean(PM2.5, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(pa_hour, aes(hr, PM25, colour=wday)) +\n    geom_line(linewidth=0.4) +\n    ggh4x::facet_nested(. ~ Cidade + sensor_id, scales=\"free_y\") +\n    scale_x_continuous(breaks=seq(0,24,4)) +\n    theme_classic() +\n    labs(x=\"Hora\", y=\"PM2.5 (µg/m³)\", colour=\"Dia\", title=\"Padrões hora × dia da semana (PurpleAir)\")\n}\n\n\n\n\n\n\n\n\n\n\n6.0.3 Comparação com Limites OMS (diário GM-5000)\n\nif (exists(\"Datafinal\")) {\n  df_day &lt;- Datafinal %&gt;%\n    select(Cidade, Date, SO2, NO2, PM2.5, PM10, O3, CO) %&gt;%\n    tidyr::pivot_longer(-c(Cidade, Date), names_to=\"Poluente\", values_to=\"Valor\")\n\n  df_mean &lt;- df_day %&gt;%\n    group_by(Cidade, Poluente) %&gt;%\n    summarise(Media = mean(Valor, na.rm=TRUE), .groups=\"drop\")\n\n  ggplot(df_day, aes(Date, Valor)) +\n    stat_summary(fun=\"mean\", geom=\"col\", fill=\"grey70\") +\n    geom_hline(data=df_mean, aes(yintercept=Media, linetype=\"média período\"), colour=\"black\") +\n    facet_wrap(~Poluente, scales=\"free_y\") +\n    scale_x_date(breaks=\"1 month\", labels=scales::label_date_short()) +\n    theme_bw() +\n    labs(x=\"Data\", y=\"Concentração\", linetype=\"\", title=\"Médias diárias por poluente\") +\n    theme(legend.position=\"bottom\")\n}",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Padrões Temporais da Qualidade do Ar</span>"
    ]
  },
  {
    "objectID": "05-fontes-meteo.html",
    "href": "05-fontes-meteo.html",
    "title": "7  Meteorologia e Potenciais Fontes (Polar / Vento)",
    "section": "",
    "text": "library(openair)\nlibrary(tidyverse)\n#source(\"scripts/load_cached_data.R\")\n\n\n# teste rápido: figura base (deve gerar uma imagem PNG embutida)\nplot(1:10, main = \"Teste: plot(1:10) - Deve aparecer no HTML\")\n\n\n\n\n\n\n\n# teste ggplot (deve gerar imagem)\nlibrary(ggplot2)\np &lt;- ggplot(mtcars, aes(x = wt, y = mpg)) + geom_point() + ggtitle(\"Teste: ggplot mtcars\")\nprint(p)\n\n\n\n\n\n\n\n# teste htmlwidget (levemente opcional; se plotly/leaflet instalados)\nif (requireNamespace(\"htmlwidgets\", quietly = TRUE) && requireNamespace(\"leaflet\", quietly = TRUE)) {\n  leaflet::leaflet() %&gt;% leaflet::addTiles() %&gt;% leaflet::setView(-49.3, -25.3, zoom = 10)\n}\n\n\n\n\n\n\n7.0.1 Polar plots (exemplo NO2)\n\nif (exists(\"air_quality_data_ugm3\") && exists(\"meteo_hour\")) {\n  joined &lt;- air_quality_data_ugm3 %&gt;%\n    left_join(meteo_hour %&gt;% select(date, ws, wd, Cidade), by=c(\"Cidade\", \"date\"))\n\n  joined %&gt;%\n    subset(Cidade == \"Rio Branco do Sul\") %&gt;%\n    openair::polarPlot(pollutant=\"NO2\", ws=\"ws\", wd=\"wd\", main=\"NO2 vs. vento — RBS\")\n}\n\n\n\n\n\n\n\n\n\n\n7.0.2 pollutionRose aplicado a PM2.5 sintetizado\n\nif (exists(\"purpleair\") && exists(\"meteo_hour\")) {\n  meteo &lt;- meteo_hour %&gt;% select(date, ws, wd, Cidade)\n  \n  pa_join &lt;- purpleair %&gt;%\n    dplyr::left_join(meteo, by=c(\"Cidade\", \"Date\"=\"date\"))\n\n  pa_join %&gt;%\n    openair::pollutionRose(pollutant=\"PM2.5\", \n                           type=\"Cidade\", hemisphere=\"southern\",\n                           key.footer=\"PM2.5 (µg/m³)\")\n}",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Meteorologia e Potenciais Fontes (Polar / Vento)</span>"
    ]
  },
  {
    "objectID": "06-mapas.html",
    "href": "06-mapas.html",
    "title": "8  Mapas Interativos",
    "section": "",
    "text": "library(leaflet)\n\n#source(\"scripts/load_cached_data.R\")\n\nCaso os dados de localização estejam no objeto localizacao, geramos mapa interativo dos sensores.\n\nif (exists(\"localizacao\")) {\n\n    df_map &lt;- localizacao %&gt;%\n    dplyr::mutate(popup = paste0(\"&lt;b&gt;\", Local, \"&lt;/b&gt;&lt;br/&gt;Cidade: \", Cidade,\n                          \"&lt;br/&gt;Tipo: \", Tipo))\n  pal &lt;- colorFactor(RColorBrewer::brewer.pal(5,\"Set2\"), df_map$Cidade)\n\n  leaflet(df_map) %&gt;%\n    addTiles() %&gt;%\n    addCircleMarkers(~Long, ~Lat,\n                     color=~pal(Cidade),\n                     radius=6,\n                     stroke=TRUE, weight=1,\n                     fillOpacity=0.8,\n                     popup=~popup) %&gt;%\n    leaflet::addLegend(\"bottomright\", pal=pal, values=~Cidade, title=\"Cidade\")\n}",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Mapas Interativos</span>"
    ]
  },
  {
    "objectID": "07-estatisticas.html",
    "href": "07-estatisticas.html",
    "title": "9  Estatísticas Resumidas",
    "section": "",
    "text": "library(openair)\nlibrary(DT)\n#source(\"scripts/load_cached_data.R\")\n\n\n9.0.1 aqStats (GM-5000)\n\nif (exists(\"air_quality_data_ugm3\")) {\n  stats_gm &lt;- air_quality_data_ugm3 %&gt;%\n    aqStats(type=\"Cidade\", pollutant=c(\"SO2\",\"NO2\",\"O3\",\"CO\",\"PM2.5\",\"PM10\"))\n  DT::datatable(stats_gm)\n}\n\n\n\n\n\n\n\n9.0.2 aqStats (PurpleAir PM2.5)",
    "crumbs": [
      "<span class='chapter-number'>9</span>  <span class='chapter-title'>Estatísticas Resumidas</span>"
    ]
  },
  {
    "objectID": "08-anexos.html",
    "href": "08-anexos.html",
    "title": "10  Anexos",
    "section": "",
    "text": "#source(\"scripts/load_cached_data.R\")\n\n\n10.0.1 Tabela AQI\n\nif (exists(\"AQItab\")) DT::datatable(AQItab)\n\n\n\n\n\n\n\n10.0.2 Poltab (Precauções)\n\nif (exists(\"Poltab\")) DT::datatable(Poltab)\n\n\n\n\n\n\n\n10.0.3 Sessão\n\nsessionInfo()\n\nR version 4.4.3 (2025-02-28 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 26100)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=Portuguese_Brazil.utf8  LC_CTYPE=Portuguese_Brazil.utf8   \n[3] LC_MONETARY=Portuguese_Brazil.utf8 LC_NUMERIC=C                      \n[5] LC_TIME=Portuguese_Brazil.utf8    \n\ntime zone: America/Sao_Paulo\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n [1] digest_0.6.37     R6_2.6.1          fastmap_1.2.0     xfun_0.53        \n [5] magrittr_2.0.4    cachem_1.1.0      knitr_1.50        htmltools_0.5.8.1\n [9] rmarkdown_2.29    lifecycle_1.0.4   DT_0.34.0         cli_3.6.5        \n[13] sass_0.4.10       jquerylib_0.1.4   compiler_4.4.3    rstudioapi_0.17.1\n[17] tools_4.4.3       bslib_0.9.0       evaluate_1.0.5    yaml_2.3.10      \n[21] rlang_1.1.6       jsonlite_2.0.0    htmlwidgets_1.6.4 crosstalk_1.2.2",
    "crumbs": [
      "<span class='chapter-number'>10</span>  <span class='chapter-title'>Anexos</span>"
    ]
  }
]